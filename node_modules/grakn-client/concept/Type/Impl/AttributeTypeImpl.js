/*
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 */
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
(function (factory) {
    if (typeof module === "object" && typeof module.exports === "object") {
        var v = factory(require, exports);
        if (v !== undefined) module.exports = v;
    }
    else if (typeof define === "function" && define.amd) {
        define("grakn-client/concept/Type/Impl/AttributeTypeImpl", ["require", "exports", "grakn-client/concept/Type/Impl/ThingTypeImpl", "grakn-client/concept/Type/AttributeType", "graknlabs-grpc-protocol/protobuf/concept_pb", "assert"], factory);
    }
})(function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.RemoteDateTimeAttributeTypeImpl = exports.DateTimeAttributeTypeImpl = exports.RemoteStringAttributeTypeImpl = exports.StringAttributeTypeImpl = exports.RemoteDoubleAttributeTypeImpl = exports.DoubleAttributeTypeImpl = exports.RemoteLongAttributeTypeImpl = exports.LongAttributeTypeImpl = exports.RemoteBooleanAttributeTypeImpl = exports.BooleanAttributeTypeImpl = exports.RemoteAttributeTypeImpl = exports.AttributeTypeImpl = void 0;
    const ThingTypeImpl_1 = require("grakn-client/concept/Type/Impl/ThingTypeImpl");
    const AttributeType_1 = require("grakn-client/concept/Type/AttributeType");
    const concept_pb_1 = __importDefault(require("graknlabs-grpc-protocol/protobuf/concept_pb"));
    var ValueType = AttributeType_1.AttributeType.ValueType;
    var isKeyable = AttributeType_1.AttributeType.ValueType.isKeyable;
    const assert_1 = __importDefault(require("assert"));
    class AttributeTypeImpl extends ThingTypeImpl_1.ThingTypeImpl {
        constructor(label, isRoot) {
            super(label, isRoot);
        }
        static of(type) {
            switch (type.getValueType()) {
                case concept_pb_1.default.AttributeType.VALUE_TYPE.BOOLEAN:
                    return new BooleanAttributeTypeImpl(type.getLabel(), type.getRoot());
                case concept_pb_1.default.AttributeType.VALUE_TYPE.LONG:
                    return new LongAttributeTypeImpl(type.getLabel(), type.getRoot());
                case concept_pb_1.default.AttributeType.VALUE_TYPE.DOUBLE:
                    return new DoubleAttributeTypeImpl(type.getLabel(), type.getRoot());
                case concept_pb_1.default.AttributeType.VALUE_TYPE.STRING:
                    return new StringAttributeTypeImpl(type.getLabel(), type.getRoot());
                case concept_pb_1.default.AttributeType.VALUE_TYPE.DATETIME:
                    return new DateTimeAttributeTypeImpl(type.getLabel(), type.getRoot());
                case concept_pb_1.default.AttributeType.VALUE_TYPE.OBJECT:
                    assert_1.default(type.getRoot());
                    return new AttributeTypeImpl(type.getLabel(), type.getRoot());
                default:
                    throw "Bad value type";
            }
        }
        getValueType() {
            return ValueType.OBJECT;
        }
        isKeyable() {
            return isKeyable(this.getValueType());
        }
        asRemote(transaction) {
            return new RemoteAttributeTypeImpl(transaction, this.getLabel(), this.isRoot());
        }
    }
    exports.AttributeTypeImpl = AttributeTypeImpl;
    AttributeTypeImpl.ROOT_LABEL = "attribute";
    class RemoteAttributeTypeImpl extends ThingTypeImpl_1.RemoteThingTypeImpl {
        constructor(transaction, label, isRoot) {
            super(transaction, label, isRoot);
        }
        getValueType() {
            return ValueType.OBJECT;
        }
        isKeyable() {
            return isKeyable(this.getValueType());
        }
        asRemote(transaction) {
            return new RemoteAttributeTypeImpl(transaction, this.getLabel(), this.isRoot());
        }
        setSupertype(type) {
            throw "Not implemented yet";
        }
        getSupertype() {
            throw "Not implemented yet";
        }
        getSupertypes() {
            throw "Not implemented yet";
        }
        getSubtypes() {
            throw "Not implemented yet";
        }
        getInstances() {
            throw "Not implemented yet";
        }
        getOwners(onlyKey) {
            throw "Not implemented yet";
        }
        putInternal(value) {
            throw "Not implemented yet";
        }
        getInternal(value) {
            throw "Not implemented yet";
        }
    }
    exports.RemoteAttributeTypeImpl = RemoteAttributeTypeImpl;
    class BooleanAttributeTypeImpl extends AttributeTypeImpl {
        constructor(label, isRoot) {
            super(label, isRoot);
        }
        getValueType() {
            return ValueType.BOOLEAN;
        }
        asRemote(transaction) {
            return new RemoteBooleanAttributeTypeImpl(transaction, this.getLabel(), this.isRoot());
        }
    }
    exports.BooleanAttributeTypeImpl = BooleanAttributeTypeImpl;
    class RemoteBooleanAttributeTypeImpl extends RemoteAttributeTypeImpl {
        constructor(transaction, label, isRoot) {
            super(transaction, label, isRoot);
        }
        getValueType() {
            return ValueType.BOOLEAN;
        }
        asRemote(transaction) {
            return new RemoteBooleanAttributeTypeImpl(transaction, this.getLabel(), this.isRoot());
        }
        getSupertype() {
            throw "Not implemented yet";
        }
        getSupertypes() {
            throw "Not implemented yet";
        }
        getSubtypes() {
            throw "Not implemented yet";
        }
        getInstances() {
            throw "Not implemented yet";
        }
        setSupertype(type) {
            super.setSupertype(type);
        }
        put(value) {
            return this.putInternal(value);
        }
        get(value) {
            return this.getInternal(value);
        }
    }
    exports.RemoteBooleanAttributeTypeImpl = RemoteBooleanAttributeTypeImpl;
    class LongAttributeTypeImpl extends AttributeTypeImpl {
        constructor(label, isRoot) {
            super(label, isRoot);
        }
        getValueType() {
            return ValueType.LONG;
        }
        asRemote(transaction) {
            return new RemoteLongAttributeTypeImpl(transaction, this.getLabel(), this.isRoot());
        }
    }
    exports.LongAttributeTypeImpl = LongAttributeTypeImpl;
    class RemoteLongAttributeTypeImpl extends RemoteAttributeTypeImpl {
        constructor(transaction, label, isRoot) {
            super(transaction, label, isRoot);
        }
        getValueType() {
            return ValueType.LONG;
        }
        asRemote(transaction) {
            return new RemoteLongAttributeTypeImpl(transaction, this.getLabel(), this.isRoot());
        }
        getSupertype() {
            throw "Not implemented yet";
        }
        getSupertypes() {
            throw "Not implemented yet";
        }
        getSubtypes() {
            throw "Not implemented yet";
        }
        getInstances() {
            throw "Not implemented yet";
        }
        setSupertype(type) {
            super.setSupertype(type);
        }
        put(value) {
            return this.putInternal(value);
        }
        get(value) {
            return this.getInternal(value);
        }
    }
    exports.RemoteLongAttributeTypeImpl = RemoteLongAttributeTypeImpl;
    class DoubleAttributeTypeImpl extends AttributeTypeImpl {
        constructor(label, isRoot) {
            super(label, isRoot);
        }
        getValueType() {
            return ValueType.DOUBLE;
        }
        asRemote(transaction) {
            return new RemoteDoubleAttributeTypeImpl(transaction, this.getLabel(), this.isRoot());
        }
    }
    exports.DoubleAttributeTypeImpl = DoubleAttributeTypeImpl;
    class RemoteDoubleAttributeTypeImpl extends RemoteAttributeTypeImpl {
        constructor(transaction, label, isRoot) {
            super(transaction, label, isRoot);
        }
        getValueType() {
            return ValueType.DOUBLE;
        }
        asRemote(transaction) {
            return new RemoteDoubleAttributeTypeImpl(transaction, this.getLabel(), this.isRoot());
        }
        getSupertype() {
            throw "Not implemented yet";
        }
        getSupertypes() {
            throw "Not implemented yet";
        }
        getSubtypes() {
            throw "Not implemented yet";
        }
        getInstances() {
            throw "Not implemented yet";
        }
        setSupertype(type) {
            super.setSupertype(type);
        }
        put(value) {
            return this.putInternal(value);
        }
        get(value) {
            return this.getInternal(value);
        }
    }
    exports.RemoteDoubleAttributeTypeImpl = RemoteDoubleAttributeTypeImpl;
    class StringAttributeTypeImpl extends AttributeTypeImpl {
        constructor(label, isRoot) {
            super(label, isRoot);
        }
        getValueType() {
            return ValueType.STRING;
        }
        asRemote(transaction) {
            return new RemoteStringAttributeTypeImpl(transaction, this.getLabel(), this.isRoot());
        }
    }
    exports.StringAttributeTypeImpl = StringAttributeTypeImpl;
    class RemoteStringAttributeTypeImpl extends RemoteAttributeTypeImpl {
        constructor(transaction, label, isRoot) {
            super(transaction, label, isRoot);
        }
        getValueType() {
            return ValueType.STRING;
        }
        asRemote(transaction) {
            return new RemoteStringAttributeTypeImpl(transaction, this.getLabel(), this.isRoot());
        }
        getSupertype() {
            throw "Not implemented yet";
        }
        getSupertypes() {
            throw "Not implemented yet";
        }
        getSubtypes() {
            throw "Not implemented yet";
        }
        getInstances() {
            throw "Not implemented yet";
        }
        setSupertype(type) {
            super.setSupertype(type);
        }
        put(value) {
            return this.putInternal(value);
        }
        get(value) {
            return this.getInternal(value);
        }
    }
    exports.RemoteStringAttributeTypeImpl = RemoteStringAttributeTypeImpl;
    class DateTimeAttributeTypeImpl extends AttributeTypeImpl {
        constructor(label, isRoot) {
            super(label, isRoot);
        }
        getValueType() {
            return ValueType.DATETIME;
        }
        asRemote(transaction) {
            return new RemoteDateTimeAttributeTypeImpl(transaction, this.getLabel(), this.isRoot());
        }
    }
    exports.DateTimeAttributeTypeImpl = DateTimeAttributeTypeImpl;
    class RemoteDateTimeAttributeTypeImpl extends RemoteAttributeTypeImpl {
        constructor(transaction, label, isRoot) {
            super(transaction, label, isRoot);
        }
        getValueType() {
            return ValueType.DATETIME;
        }
        asRemote(transaction) {
            return new RemoteDateTimeAttributeTypeImpl(transaction, this.getLabel(), this.isRoot());
        }
        getSupertype() {
            throw "Not implemented yet";
        }
        getSupertypes() {
            throw "Not implemented yet";
        }
        getSubtypes() {
            throw "Not implemented yet";
        }
        getInstances() {
            throw "Not implemented yet";
        }
        setSupertype(type) {
            super.setSupertype(type);
        }
        put(value) {
            return this.putInternal(value);
        }
        get(value) {
            return this.getInternal(value);
        }
    }
    exports.RemoteDateTimeAttributeTypeImpl = RemoteDateTimeAttributeTypeImpl;
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQXR0cmlidXRlVHlwZUltcGwuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9jb25jZXB0L1R5cGUvSW1wbC9BdHRyaWJ1dGVUeXBlSW1wbC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7R0FpQkc7Ozs7Ozs7Ozs7Ozs7Ozs7SUFFSCxnRkFBcUU7SUFDckUsMkVBRXNHO0lBRXRHLDZGQUF1RTtJQUV2RSxJQUFPLFNBQVMsR0FBRyw2QkFBYSxDQUFDLFNBQVMsQ0FBQztJQUMzQyxJQUFPLFNBQVMsR0FBRyw2QkFBYSxDQUFDLFNBQVMsQ0FBQyxTQUFTLENBQUM7SUFJckQsb0RBQTRCO0lBRzVCLE1BQWEsaUJBQWtCLFNBQVEsNkJBQWE7UUFJaEQsWUFBc0IsS0FBYSxFQUFFLE1BQWU7WUFDaEQsS0FBSyxDQUFDLEtBQUssRUFBRSxNQUFNLENBQUMsQ0FBQztRQUN6QixDQUFDO1FBRUQsTUFBTSxDQUFDLEVBQUUsQ0FBQyxJQUF1QjtZQUM3QixRQUFRLElBQUksQ0FBQyxZQUFZLEVBQUUsRUFBRTtnQkFDekIsS0FBSyxvQkFBWSxDQUFDLGFBQWEsQ0FBQyxVQUFVLENBQUMsT0FBTztvQkFDOUMsT0FBTyxJQUFJLHdCQUF3QixDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsRUFBRSxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQztnQkFDekUsS0FBSyxvQkFBWSxDQUFDLGFBQWEsQ0FBQyxVQUFVLENBQUMsSUFBSTtvQkFDM0MsT0FBTyxJQUFJLHFCQUFxQixDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsRUFBRSxJQUFJLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQztnQkFDdEUsS0FBSyxvQkFBWSxDQUFDLGFBQWEsQ0FBQyxVQUFVLENBQUMsTUFBTTtvQkFDN0MsT0FBTyxJQUFJLHVCQUF1QixDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsRUFBRSxJQUFJLENBQUMsT0FBTyxFQUFF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QUM7UUFFRCxhQUFhO1lBQ1QsTUFBTSxxQkFBcUIsQ0FBQztRQUNoQyxDQUFDO1FBRUQsV0FBVztZQUNQLE1BQU0scUJBQXFCLENBQUM7UUFDaEMsQ0FBQztRQUVELFlBQVk7WUFDUixNQUFNLHFCQUFxQixDQUFDO1FBQ2hDLENBQUM7UUFFRCxZQUFZLENBQUMsSUFBMkI7WUFDcEMsS0FBSyxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUM3QixDQUFDO1FBRUQsR0FBRyxDQUFDLEtBQVc7WUFDWCxPQUFPLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUEwQixDQUFDO1FBQzVELENBQUM7UUFFRCxHQUFHLENBQUMsS0FBVztZQUNYLE9BQU8sSUFBSSxDQUFDLFdBQVcsQ0FBQyxLQUFLLENBQTBCLENBQUM7UUFDNUQsQ0FBQztLQUNKO0lBekNELDBFQXlDQyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBMaWNlbnNlZCB0byB0aGUgQXBhY2hlIFNvZnR3YXJlIEZvdW5kYXRpb24gKEFTRikgdW5kZXIgb25lXG4gKiBvciBtb3JlIGNvbnRyaWJ1dG9yIGxpY2Vuc2UgYWdyZWVtZW50cy4gIFNlZSB0aGUgTk9USUNFIGZpbGVcbiAqIGRpc3RyaWJ1dGVkIHdpdGggdGhpcyB3b3JrIGZvciBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4gKiByZWdhcmRpbmcgY29weXJpZ2h0IG93bmVyc2hpcC4gIFRoZSBBU0YgbGljZW5zZXMgdGhpcyBmaWxlXG4gKiB0byB5b3UgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlXG4gKiBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcbiAqIHdpdGggdGhlIExpY2Vuc2UuICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZyxcbiAqIHNvZnR3YXJlIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuXG4gKiBcIkFTIElTXCIgQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxuICogS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4gIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlXG4gKiBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kIGxpbWl0YXRpb25zXG4gKiB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBSZW1vdGVUaGluZ1R5cGVJbXBsLCBUaGluZ1R5cGVJbXBsIH0gZnJvbSBcIi4vVGhpbmdUeXBlSW1wbFwiO1xuaW1wb3J0IHsgQXR0cmlidXRlVHlwZSwgQm9vbGVhbkF0dHJpYnV0ZVR5cGUsIERhdGVUaW1lQXR0cmlidXRlVHlwZSwgRG91YmxlQXR0cmlidXRlVHlwZSwgTG9uZ0F0dHJpYnV0ZVR5cGUsXG4gICAgUmVtb3RlQXR0cmlidXRlVHlwZSwgUmVtb3RlQm9vbGVhbkF0dHJpYnV0ZVR5cGUsIFJlbW90ZURhdGVUaW1lQXR0cmlidXRlVHlwZSwgUmVtb3RlRG91YmxlQXR0cmlidXRlVHlwZSxcbiAgICBSZW1vdGVMb25nQXR0cmlidXRlVHlwZSwgUmVtb3RlU3RyaW5nQXR0cmlidXRlVHlwZSwgU3RyaW5nQXR0cmlidXRlVHlwZSB9IGZyb20gXCIuLi9BdHRyaWJ1dGVUeXBlXCI7XG5pbXBvcnQgeyBHcmFrbiB9IGZyb20gXCIuLi8uLi8uLi9HcmFrblwiO1xuaW1wb3J0IENvbmNlcHRQcm90byBmcm9tIFwiZ3Jha25sYWJzLWdycGMtcHJvdG9jb2wvcHJvdG9idWYvY29uY2VwdF9wYlwiO1xuaW1wb3J0IFRyYW5zYWN0aW9uID0gR3Jha24uVHJhbnNhY3Rpb247XG5pbXBvcnQgVmFsdWVUeXBlID0gQXR0cmlidXRlVHlwZS5WYWx1ZVR5cGU7XG5pbXBvcnQgaXNLZXlhYmxlID0gQXR0cmlidXRlVHlwZS5WYWx1ZVR5cGUuaXNLZXlhYmxlO1xuaW1wb3J0IHsgQXR0cmlidXRlSW1wbCwgQm9vbGVhbkF0dHJpYnV0ZUltcGwsIERhdGVUaW1lQXR0cmlidXRlSW1wbCwgRG91YmxlQXR0cmlidXRlSW1wbCxcbiAgICBMb25nQXR0cmlidXRlSW1wbCwgU3RyaW5nQXR0cmlidXRlSW1wbCB9IGZyb20gXCIuLi8uLi9UaGluZy9JbXBsL0F0dHJpYnV0ZUltcGxcIjtcbmltcG9ydCBWYWx1ZUNsYXNzID0gQXR0cmlidXRlVHlwZS5WYWx1ZUNsYXNzO1xuaW1wb3J0IGFzc2VydCBmcm9tIFwiYXNzZXJ0XCI7XG5pbXBvcnQgeyBTdHJlYW0gfSBmcm9tIFwiLi4vLi4vLi4vcnBjL1N0cmVhbVwiO1xuXG5leHBvcnQgY2xhc3MgQXR0cmlidXRlVHlwZUltcGwgZXh0ZW5kcyBUaGluZ1R5cGVJbXBsIGltcGxlbWVudHMgQXR0cmlidXRlVHlwZSB7XG5cbiAgICBwcml2YXRlIHN0YXRpYyBST09UX0xBQkVMID0gXCJhdHRyaWJ1dGVcIjtcblxuICAgIHByb3RlY3RlZCBjb25zdHJ1Y3RvcihsYWJlbDogc3RyaW5nLCBpc1Jvb3Q6IGJvb2xlYW4pIHtcbiAgICAgICAgc3VwZXIobGFiZWwsIGlzUm9vdCk7XG4gICAgfVxuXG4gICAgc3RhdGljIG9mKHR5cGU6IENvbmNlcHRQcm90by5UeXBlKSB7XG4gICAgICAgIHN3aXRjaCAodHlwZS5nZXRWYWx1ZVR5cGUoKSkge1xuICAgICAgICAgICAgY2FzZSBDb25jZXB0UHJvdG8uQXR0cmlidXRlVHlwZS5WQUxVRV9UWVBFLkJPT0xFQU46XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBCb29sZWFuQXR0cmlidXRlVHlwZUltcGwodHlwZS5nZXRMYWJlbCgpLCB0eXBlLmdldFJvb3QoKSk7XG4gICAgICAgICAgICBjYXNlIENvbmNlcHRQcm90by5BdHRyaWJ1dGVUeXBlLlZBTFVFX1RZUEUuTE9ORzpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IExvbmdBdHRyaWJ1dGVUeXBlSW1wbCh0eXBlLmdldExhYmVsKCksIHR5cGUuZ2V0Um9vdCgpKTtcbiAgICAgICAgICAgIGNhc2UgQ29uY2VwdFByb3RvLkF0dHJpYnV0ZVR5cGUuVkFMVUVfVFlQRS5ET1VCTEU6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEb3VibGVBdHRyaWJ1dGVUeXBlSW1wbCh0eXBlLmdldExhYmVsKCksIHR5cGUuZ2V0Um9vdCgpKTtcbiAgICAgICAgICAgIGNhc2UgQ29uY2VwdFByb3RvLkF0dHJpYnV0ZVR5cGUuVkFMVUVfVFlQRS5TVFJJTkc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBTdHJpbmdBdHRyaWJ1dGVUeXBlSW1wbCh0eXBlLmdldExhYmVsKCksIHR5cGUuZ2V0Um9vdCgpKTtcbiAgICAgICAgICAgIGNhc2UgQ29uY2VwdFByb3RvLkF0dHJpYnV0ZVR5cGUuVkFMVUVfVFlQRS5EQVRFVElNRTpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IERhdGVUaW1lQXR0cmlidXRlVHlwZUltcGwodHlwZS5nZXRMYWJlbCgpLCB0eXBlLmdldFJvb3QoKSk7XG4gICAgICAgICAgICBjYXNlIENvbmNlcHRQcm90by5BdHRyaWJ1dGVUeXBlLlZBTFVFX1RZUEUuT0JKRUNUOlxuICAgICAgICAgICAgICAgIGFzc2VydCh0eXBlLmdldFJvb3QoKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBdHRyaWJ1dGVUeXBlSW1wbCh0eXBlLmdldExhYmVsKCksIHR5cGUuZ2V0Um9vdCgpKTtcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgXCJCYWQgdmFsdWUgdHlwZVwiO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0VmFsdWVUeXBlKCk6IFZhbHVlVHlwZSB7XG4gICAgICAgIHJldHVybiBWYWx1ZVR5cGUuT0JKRUNUO1xuICAgIH1cblxuICAgIGlzS2V5YWJsZSgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIGlzS2V5YWJsZSh0aGlzLmdldFZhbHVlVHlwZSgpKTtcbiAgICB9XG5cbiAgICBhc1JlbW90ZSh0cmFuc2FjdGlvbjogVHJhbnNhY3Rpb24pOiBSZW1vdGVBdHRyaWJ1dGVUeXBlSW1wbCB7XG4gICAgICAgIHJldHVybiBuZXcgUmVtb3RlQXR0cmlidXRlVHlwZUltcGwodHJhbnNhY3Rpb24sIHRoaXMuZ2V0TGFiZWwoKSwgdGhpcy5pc1Jvb3QoKSlcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBSZW1vdGVBdHRyaWJ1dGVUeXBlSW1wbCBleHRlbmRzIFJlbW90ZVRoaW5nVHlwZUltcGwgaW1wbGVtZW50cyBSZW1vdGVBdHRyaWJ1dGVUeXBlIHtcblxuICAgIGNvbnN0cnVjdG9yKHRyYW5zYWN0aW9uOiBUcmFuc2FjdGlvbiwgbGFiZWw6IHN0cmluZywgaXNSb290OiBib29sZWFuKSB7XG4gICAgICAgIHN1cGVyKHRyYW5zYWN0aW9uLCBsYWJlbCwgaXNSb290KTtcbiAgICB9XG5cbiAgICBnZXRWYWx1ZVR5cGUoKTogVmFsdWVUeXBlIHtcbiAgICAgICAgcmV0dXJuIFZhbHVlVHlwZS5PQkpFQ1Q7XG4gICAgfVxuXG4gICAgaXNLZXlhYmxlKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gaXNLZXlhYmxlKHRoaXMuZ2V0VmFsdWVUeXBlKCkpO1xuICAgIH1cblxuICAgIGFzUmVtb3RlKHRyYW5zYWN0aW9uOiBUcmFuc2FjdGlvbik6IFJlbW90ZUF0dHJpYnV0ZVR5cGVJbXBsIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZW1vdGVBdHRyaWJ1dGVUeXBlSW1wbCh0cmFuc2FjdGlvbiwgdGhpcy5nZXRMYWJlbCgpLCB0aGlzLmlzUm9vdCgpKVxuICAgIH1cblxuICAgIHNldFN1cGVydHlwZSh0eXBlOiBBdHRyaWJ1dGVUeXBlKTogdm9pZCB7XG4gICAgICAgIHRocm93IFwiTm90IGltcGxlbWVudGVkIHlldFwiO1xuICAgIH1cblxuICAgIGdldFN1cGVydHlwZSgpOiBBdHRyaWJ1dGVUeXBlSW1wbCB7XG4gICAgICAgIHRocm93IFwiTm90IGltcGxlbWVudGVkIHlldFwiO1xuICAgIH1cblxuICAgIGdldFN1cGVydHlwZXMoKTogU3RyZWFtPGFueT4ge1xuICAgICAgICB0aHJvdyBcIk5vdCBpbXBsZW1lbnRlZCB5ZXRcIjtcbiAgICB9XG5cbiAgICBnZXRTdWJ0eXBlcygpOiBTdHJlYW08YW55PiB7XG4gICAgICAgIHRocm93IFwiTm90IGltcGxlbWVudGVkIHlldFwiO1xuICAgIH1cblxuICAgIGdldEluc3RhbmNlcygpOiBTdHJlYW08YW55PiB7XG4gICAgICAgIHRocm93IFwiTm90IGltcGxlbWVudGVkIHlldFwiO1xuICAgIH1cblxuICAgIGdldE93bmVycyhvbmx5S2V5PzogYm9vbGVhbik6IFN0cmVhbTxhbnk+IHtcbiAgICAgICAgdGhyb3cgXCJOb3QgaW1wbGVtZW50ZWQgeWV0XCI7XG4gICAgfVxuXG4gICAgcHJvdGVjdGVkIHB1dEludGVybmFsPFQgZXh0ZW5kcyBWYWx1ZUNsYXNzPih2YWx1ZTogVCk6IEF0dHJpYnV0ZUltcGw8VD4ge1xuICAgICAgICB0aHJvdyBcIk5vdCBpbXBsZW1lbnRlZCB5ZXRcIjtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgZ2V0SW50ZXJuYWw8VCBleHRlbmRzIFZhbHVlQ2xhc3M+KHZhbHVlOiBUKTogQXR0cmlidXRlSW1wbDxUPiB7XG4gICAgICAgIHRocm93IFwiTm90IGltcGxlbWVudGVkIHlldFwiO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIEJvb2xlYW5BdHRyaWJ1dGVUeXBlSW1wbCBleHRlbmRzIEF0dHJpYnV0ZVR5cGVJbXBsIGltcGxlbWVudHMgQm9vbGVhbkF0dHJpYnV0ZVR5cGUge1xuXG4gICAgY29uc3RydWN0b3IobGFiZWw6IHN0cmluZywgaXNSb290OiBib29sZWFuKSB7XG4gICAgICAgIHN1cGVyKGxhYmVsLCBpc1Jvb3QpO1xuICAgIH1cblxuICAgIGdldFZhbHVlVHlwZSgpOiBWYWx1ZVR5cGUge1xuICAgICAgICByZXR1cm4gVmFsdWVUeXBlLkJPT0xFQU47XG4gICAgfVxuXG4gICAgYXNSZW1vdGUodHJhbnNhY3Rpb246IFRyYW5zYWN0aW9uKTogUmVtb3RlQm9vbGVhbkF0dHJpYnV0ZVR5cGVJbXBsIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZW1vdGVCb29sZWFuQXR0cmlidXRlVHlwZUltcGwodHJhbnNhY3Rpb24sIHRoaXMuZ2V0TGFiZWwoKSwgdGhpcy5pc1Jvb3QoKSlcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBSZW1vdGVCb29sZWFuQXR0cmlidXRlVHlwZUltcGwgZXh0ZW5kcyBSZW1vdGVBdHRyaWJ1dGVUeXBlSW1wbCBpbXBsZW1lbnRzIFJlbW90ZUJvb2xlYW5BdHRyaWJ1dGVUeXBlIHtcblxuICAgIGNvbnN0cnVjdG9yKHRyYW5zYWN0aW9uOiBUcmFuc2FjdGlvbiwgbGFiZWw6IHN0cmluZywgaXNSb290OiBib29sZWFuKSB7XG4gICAgICAgIHN1cGVyKHRyYW5zYWN0aW9uLCBsYWJlbCwgaXNSb290KTtcbiAgICB9XG5cbiAgICBnZXRWYWx1ZVR5cGUoKTogVmFsdWVUeXBlIHtcbiAgICAgICAgcmV0dXJuIFZhbHVlVHlwZS5CT09MRUFOO1xuICAgIH1cblxuICAgIGFzUmVtb3RlKHRyYW5zYWN0aW9uOiBUcmFuc2FjdGlvbik6IFJlbW90ZUJvb2xlYW5BdHRyaWJ1dGVUeXBlSW1wbCB7XG4gICAgICAgIHJldHVybiBuZXcgUmVtb3RlQm9vbGVhbkF0dHJpYnV0ZVR5cGVJbXBsKHRyYW5zYWN0aW9uLCB0aGlzLmdldExhYmVsKCksIHRoaXMuaXNSb290KCkpO1xuICAgIH1cblxuICAgIGdldFN1cGVydHlwZSgpOiBCb29sZWFuQXR0cmlidXRlVHlwZUltcGwge1xuICAgICAgICB0aHJvdyBcIk5vdCBpbXBsZW1lbnRlZCB5ZXRcIjtcbiAgICB9XG5cbiAgICBnZXRTdXBlcnR5cGVzKCk6IFN0cmVhbTxhbnk+IHtcbiAgICAgICAgdGhyb3cgXCJOb3QgaW1wbGVtZW50ZWQgeWV0XCI7XG4gICAgfVxuXG4gICAgZ2V0U3VidHlwZXMoKTogU3RyZWFtPGFueT4ge1xuICAgICAgICB0aHJvdyBcIk5vdCBpbXBsZW1lbnRlZCB5ZXRcIjtcbiAgICB9XG5cbiAgICBnZXRJbnN0YW5jZXMoKTogU3RyZWFtPGFueT4ge1xuICAgICAgICB0aHJvdyBcIk5vdCBpbXBsZW1lbnRlZCB5ZXRcIjtcbiAgICB9XG5cbiAgICBzZXRTdXBlcnR5cGUodHlwZTogQm9vbGVhbkF0dHJpYnV0ZVR5cGUpOiB2b2lkIHtcbiAgICAgICAgc3VwZXIuc2V0U3VwZXJ0eXBlKHR5cGUpO1xuICAgIH1cblxuICAgIHB1dCh2YWx1ZTogYm9vbGVhbik6IEJvb2xlYW5BdHRyaWJ1dGVJbXBsIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHV0SW50ZXJuYWwodmFsdWUpIGFzIEJvb2xlYW5BdHRyaWJ1dGVJbXBsO1xuICAgIH1cblxuICAgIGdldCh2YWx1ZTogYm9vbGVhbik6IEJvb2xlYW5BdHRyaWJ1dGVJbXBsIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0SW50ZXJuYWwodmFsdWUpIGFzIEJvb2xlYW5BdHRyaWJ1dGVJbXBsO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIExvbmdBdHRyaWJ1dGVUeXBlSW1wbCBleHRlbmRzIEF0dHJpYnV0ZVR5cGVJbXBsIGltcGxlbWVudHMgTG9uZ0F0dHJpYnV0ZVR5cGUge1xuXG4gICAgY29uc3RydWN0b3IobGFiZWw6IHN0cmluZywgaXNSb290OiBib29sZWFuKSB7XG4gICAgICAgIHN1cGVyKGxhYmVsLCBpc1Jvb3QpO1xuICAgIH1cblxuICAgIGdldFZhbHVlVHlwZSgpOiBWYWx1ZVR5cGUge1xuICAgICAgICByZXR1cm4gVmFsdWVUeXBlLkxPTkc7XG4gICAgfVxuXG4gICAgYXNSZW1vdGUodHJhbnNhY3Rpb246IFRyYW5zYWN0aW9uKTogUmVtb3RlTG9uZ0F0dHJpYnV0ZVR5cGVJbXBsIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZW1vdGVMb25nQXR0cmlidXRlVHlwZUltcGwodHJhbnNhY3Rpb24sIHRoaXMuZ2V0TGFiZWwoKSwgdGhpcy5pc1Jvb3QoKSlcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBSZW1vdGVMb25nQXR0cmlidXRlVHlwZUltcGwgZXh0ZW5kcyBSZW1vdGVBdHRyaWJ1dGVUeXBlSW1wbCBpbXBsZW1lbnRzIFJlbW90ZUxvbmdBdHRyaWJ1dGVUeXBlIHtcblxuICAgIGNvbnN0cnVjdG9yKHRyYW5zYWN0aW9uOiBUcmFuc2FjdGlvbiwgbGFiZWw6IHN0cmluZywgaXNSb290OiBib29sZWFuKSB7XG4gICAgICAgIHN1cGVyKHRyYW5zYWN0aW9uLCBsYWJlbCwgaXNSb290KTtcbiAgICB9XG5cbiAgICBnZXRWYWx1ZVR5cGUoKTogVmFsdWVUeXBlIHtcbiAgICAgICAgcmV0dXJuIFZhbHVlVHlwZS5MT05HO1xuICAgIH1cblxuICAgIGFzUmVtb3RlKHRyYW5zYWN0aW9uOiBUcmFuc2FjdGlvbik6IFJlbW90ZUxvbmdBdHRyaWJ1dGVUeXBlSW1wbCB7XG4gICAgICAgIHJldHVybiBuZXcgUmVtb3RlTG9uZ0F0dHJpYnV0ZVR5cGVJbXBsKHRyYW5zYWN0aW9uLCB0aGlzLmdldExhYmVsKCksIHRoaXMuaXNSb290KCkpO1xuICAgIH1cblxuICAgIGdldFN1cGVydHlwZSgpOiBMb25nQXR0cmlidXRlVHlwZUltcGwge1xuICAgICAgICB0aHJvdyBcIk5vdCBpbXBsZW1lbnRlZCB5ZXRcIjtcbiAgICB9XG5cbiAgICBnZXRTdXBlcnR5cGVzKCk6IFN0cmVhbTxhbnk+IHtcbiAgICAgICAgdGhyb3cgXCJOb3QgaW1wbGVtZW50ZWQgeWV0XCI7XG4gICAgfVxuXG4gICAgZ2V0U3VidHlwZXMoKTogU3RyZWFtPGFueT4ge1xuICAgICAgICB0aHJvdyBcIk5vdCBpbXBsZW1lbnRlZCB5ZXRcIjtcbiAgICB9XG5cbiAgICBnZXRJbnN0YW5jZXMoKTogU3RyZWFtPGFueT4ge1xuICAgICAgICB0aHJvdyBcIk5vdCBpbXBsZW1lbnRlZCB5ZXRcIjtcbiAgICB9XG5cbiAgICBzZXRTdXBlcnR5cGUodHlwZTogTG9uZ0F0dHJpYnV0ZVR5cGUpOiB2b2lkIHtcbiAgICAgICAgc3VwZXIuc2V0U3VwZXJ0eXBlKHR5cGUpO1xuICAgIH1cblxuICAgIHB1dCh2YWx1ZTogbnVtYmVyKTogTG9uZ0F0dHJpYnV0ZUltcGwge1xuICAgICAgICByZXR1cm4gdGhpcy5wdXRJbnRlcm5hbCh2YWx1ZSkgYXMgTG9uZ0F0dHJpYnV0ZUltcGw7XG4gICAgfVxuXG4gICAgZ2V0KHZhbHVlOiBudW1iZXIpOiBMb25nQXR0cmlidXRlSW1wbCB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEludGVybmFsKHZhbHVlKSBhcyBMb25nQXR0cmlidXRlSW1wbDtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBEb3VibGVBdHRyaWJ1dGVUeXBlSW1wbCBleHRlbmRzIEF0dHJpYnV0ZVR5cGVJbXBsIGltcGxlbWVudHMgRG91YmxlQXR0cmlidXRlVHlwZSB7XG5cbiAgICBjb25zdHJ1Y3RvcihsYWJlbDogc3RyaW5nLCBpc1Jvb3Q6IGJvb2xlYW4pIHtcbiAgICAgICAgc3VwZXIobGFiZWwsIGlzUm9vdCk7XG4gICAgfVxuXG4gICAgZ2V0VmFsdWVUeXBlKCk6IFZhbHVlVHlwZSB7XG4gICAgICAgIHJldHVybiBWYWx1ZVR5cGUuRE9VQkxFO1xuICAgIH1cblxuICAgIGFzUmVtb3RlKHRyYW5zYWN0aW9uOiBUcmFuc2FjdGlvbik6IFJlbW90ZURvdWJsZUF0dHJpYnV0ZVR5cGVJbXBsIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZW1vdGVEb3VibGVBdHRyaWJ1dGVUeXBlSW1wbCh0cmFuc2FjdGlvbiwgdGhpcy5nZXRMYWJlbCgpLCB0aGlzLmlzUm9vdCgpKVxuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIFJlbW90ZURvdWJsZUF0dHJpYnV0ZVR5cGVJbXBsIGV4dGVuZHMgUmVtb3RlQXR0cmlidXRlVHlwZUltcGwgaW1wbGVtZW50cyBSZW1vdGVEb3VibGVBdHRyaWJ1dGVUeXBlIHtcblxuICAgIGNvbnN0cnVjdG9yKHRyYW5zYWN0aW9uOiBUcmFuc2FjdGlvbiwgbGFiZWw6IHN0cmluZywgaXNSb290OiBib29sZWFuKSB7XG4gICAgICAgIHN1cGVyKHRyYW5zYWN0aW9uLCBsYWJlbCwgaXNSb290KTtcbiAgICB9XG5cbiAgICBnZXRWYWx1ZVR5cGUoKTogVmFsdWVUeXBlIHtcbiAgICAgICAgcmV0dXJuIFZhbHVlVHlwZS5ET1VCTEU7XG4gICAgfVxuXG4gICAgYXNSZW1vdGUodHJhbnNhY3Rpb246IFRyYW5zYWN0aW9uKTogUmVtb3RlRG91YmxlQXR0cmlidXRlVHlwZUltcGwge1xuICAgICAgICByZXR1cm4gbmV3IFJlbW90ZURvdWJsZUF0dHJpYnV0ZVR5cGVJbXBsKHRyYW5zYWN0aW9uLCB0aGlzLmdldExhYmVsKCksIHRoaXMuaXNSb290KCkpO1xuICAgIH1cblxuICAgIGdldFN1cGVydHlwZSgpOiBEb3VibGVBdHRyaWJ1dGVUeXBlSW1wbCB7XG4gICAgICAgIHRocm93IFwiTm90IGltcGxlbWVudGVkIHlldFwiO1xuICAgIH1cblxuICAgIGdldFN1cGVydHlwZXMoKTogU3RyZWFtPGFueT4ge1xuICAgICAgICB0aHJvdyBcIk5vdCBpbXBsZW1lbnRlZCB5ZXRcIjtcbiAgICB9XG5cbiAgICBnZXRTdWJ0eXBlcygpOiBTdHJlYW08YW55PiB7XG4gICAgICAgIHRocm93IFwiTm90IGltcGxlbWVudGVkIHlldFwiO1xuICAgIH1cblxuICAgIGdldEluc3RhbmNlcygpOiBTdHJlYW08YW55PiB7XG4gICAgICAgIHRocm93IFwiTm90IGltcGxlbWVudGVkIHlldFwiO1xuICAgIH1cblxuICAgIHNldFN1cGVydHlwZSh0eXBlOiBEb3VibGVBdHRyaWJ1dGVUeXBlKTogdm9pZCB7XG4gICAgICAgIHN1cGVyLnNldFN1cGVydHlwZSh0eXBlKTtcbiAgICB9XG5cbiAgICBwdXQodmFsdWU6IG51bWJlcik6IERvdWJsZUF0dHJpYnV0ZUltcGwge1xuICAgICAgICByZXR1cm4gdGhpcy5wdXRJbnRlcm5hbCh2YWx1ZSkgYXMgRG91YmxlQXR0cmlidXRlSW1wbDtcbiAgICB9XG5cbiAgICBnZXQodmFsdWU6IG51bWJlcik6IERvdWJsZUF0dHJpYnV0ZUltcGwge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRJbnRlcm5hbCh2YWx1ZSkgYXMgRG91YmxlQXR0cmlidXRlSW1wbDtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBTdHJpbmdBdHRyaWJ1dGVUeXBlSW1wbCBleHRlbmRzIEF0dHJpYnV0ZVR5cGVJbXBsIGltcGxlbWVudHMgU3RyaW5nQXR0cmlidXRlVHlwZSB7XG5cbiAgICBjb25zdHJ1Y3RvcihsYWJlbDogc3RyaW5nLCBpc1Jvb3Q6IGJvb2xlYW4pIHtcbiAgICAgICAgc3VwZXIobGFiZWwsIGlzUm9vdCk7XG4gICAgfVxuXG4gICAgZ2V0VmFsdWVUeXBlKCk6IFZhbHVlVHlwZSB7XG4gICAgICAgIHJldHVybiBWYWx1ZVR5cGUuU1RSSU5HO1xuICAgIH1cblxuICAgIGFzUmVtb3RlKHRyYW5zYWN0aW9uOiBUcmFuc2FjdGlvbik6IFJlbW90ZVN0cmluZ0F0dHJpYnV0ZVR5cGVJbXBsIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZW1vdGVTdHJpbmdBdHRyaWJ1dGVUeXBlSW1wbCh0cmFuc2FjdGlvbiwgdGhpcy5nZXRMYWJlbCgpLCB0aGlzLmlzUm9vdCgpKVxuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIFJlbW90ZVN0cmluZ0F0dHJpYnV0ZVR5cGVJbXBsIGV4dGVuZHMgUmVtb3RlQXR0cmlidXRlVHlwZUltcGwgaW1wbGVtZW50cyBSZW1vdGVTdHJpbmdBdHRyaWJ1dGVUeXBlIHtcblxuICAgIGNvbnN0cnVjdG9yKHRyYW5zYWN0aW9uOiBUcmFuc2FjdGlvbiwgbGFiZWw6IHN0cmluZywgaXNSb290OiBib29sZWFuKSB7XG4gICAgICAgIHN1cGVyKHRyYW5zYWN0aW9uLCBsYWJlbCwgaXNSb290KTtcbiAgICB9XG5cbiAgICBnZXRWYWx1ZVR5cGUoKTogVmFsdWVUeXBlIHtcbiAgICAgICAgcmV0dXJuIFZhbHVlVHlwZS5TVFJJTkc7XG4gICAgfVxuXG4gICAgYXNSZW1vdGUodHJhbnNhY3Rpb246IFRyYW5zYWN0aW9uKTogUmVtb3RlU3RyaW5nQXR0cmlidXRlVHlwZUltcGwge1xuICAgICAgICByZXR1cm4gbmV3IFJlbW90ZVN0cmluZ0F0dHJpYnV0ZVR5cGVJbXBsKHRyYW5zYWN0aW9uLCB0aGlzLmdldExhYmVsKCksIHRoaXMuaXNSb290KCkpO1xuICAgIH1cblxuICAgIGdldFN1cGVydHlwZSgpOiBTdHJpbmdBdHRyaWJ1dGVUeXBlSW1wbCB7XG4gICAgICAgIHRocm93IFwiTm90IGltcGxlbWVudGVkIHlldFwiO1xuICAgIH1cblxuICAgIGdldFN1cGVydHlwZXMoKTogU3RyZWFtPGFueT4ge1xuICAgICAgICB0aHJvdyBcIk5vdCBpbXBsZW1lbnRlZCB5ZXRcIjtcbiAgICB9XG5cbiAgICBnZXRTdWJ0eXBlcygpOiBTdHJlYW08YW55PiB7XG4gICAgICAgIHRocm93IFwiTm90IGltcGxlbWVudGVkIHlldFwiO1xuICAgIH1cblxuICAgIGdldEluc3RhbmNlcygpOiBTdHJlYW08YW55PiB7XG4gICAgICAgIHRocm93IFwiTm90IGltcGxlbWVudGVkIHlldFwiO1xuICAgIH1cblxuICAgIHNldFN1cGVydHlwZSh0eXBlOiBTdHJpbmdBdHRyaWJ1dGVUeXBlKTogdm9pZCB7XG4gICAgICAgIHN1cGVyLnNldFN1cGVydHlwZSh0eXBlKTtcbiAgICB9XG5cbiAgICBwdXQodmFsdWU6IHN0cmluZyk6IFN0cmluZ0F0dHJpYnV0ZUltcGwge1xuICAgICAgICByZXR1cm4gdGhpcy5wdXRJbnRlcm5hbCh2YWx1ZSkgYXMgU3RyaW5nQXR0cmlidXRlSW1wbDtcbiAgICB9XG5cbiAgICBnZXQodmFsdWU6IHN0cmluZyk6IFN0cmluZ0F0dHJpYnV0ZUltcGwge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRJbnRlcm5hbCh2YWx1ZSkgYXMgU3RyaW5nQXR0cmlidXRlSW1wbDtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBEYXRlVGltZUF0dHJpYnV0ZVR5cGVJbXBsIGV4dGVuZHMgQXR0cmlidXRlVHlwZUltcGwgaW1wbGVtZW50cyBEYXRlVGltZUF0dHJpYnV0ZVR5cGUge1xuXG4gICAgY29uc3RydWN0b3IobGFiZWw6IHN0cmluZywgaXNSb290OiBib29sZWFuKSB7XG4gICAgICAgIHN1cGVyKGxhYmVsLCBpc1Jvb3QpO1xuICAgIH1cblxuICAgIGdldFZhbHVlVHlwZSgpOiBWYWx1ZVR5cGUge1xuICAgICAgICByZXR1cm4gVmFsdWVUeXBlLkRBVEVUSU1FO1xuICAgIH1cblxuICAgIGFzUmVtb3RlKHRyYW5zYWN0aW9uOiBUcmFuc2FjdGlvbik6IFJlbW90ZURhdGVUaW1lQXR0cmlidXRlVHlwZUltcGwge1xuICAgICAgICByZXR1cm4gbmV3IFJlbW90ZURhdGVUaW1lQXR0cmlidXRlVHlwZUltcGwodHJhbnNhY3Rpb24sIHRoaXMuZ2V0TGFiZWwoKSwgdGhpcy5pc1Jvb3QoKSlcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBSZW1vdGVEYXRlVGltZUF0dHJpYnV0ZVR5cGVJbXBsIGV4dGVuZHMgUmVtb3RlQXR0cmlidXRlVHlwZUltcGwgaW1wbGVtZW50cyBSZW1vdGVEYXRlVGltZUF0dHJpYnV0ZVR5cGUge1xuXG4gICAgY29uc3RydWN0b3IodHJhbnNhY3Rpb246IFRyYW5zYWN0aW9uLCBsYWJlbDogc3RyaW5nLCBpc1Jvb3Q6IGJvb2xlYW4pIHtcbiAgICAgICAgc3VwZXIodHJhbnNhY3Rpb24sIGxhYmVsLCBpc1Jvb3QpO1xuICAgIH1cblxuICAgIGdldFZhbHVlVHlwZSgpOiBWYWx1ZVR5cGUge1xuICAgICAgICByZXR1cm4gVmFsdWVUeXBlLkRBVEVUSU1FO1xuICAgIH1cblxuICAgIGFzUmVtb3RlKHRyYW5zYWN0aW9uOiBUcmFuc2FjdGlvbik6IFJlbW90ZURhdGVUaW1lQXR0cmlidXRlVHlwZUltcGwge1xuICAgICAgICByZXR1cm4gbmV3IFJlbW90ZURhdGVUaW1lQXR0cmlidXRlVHlwZUltcGwodHJhbnNhY3Rpb24sIHRoaXMuZ2V0TGFiZWwoKSwgdGhpcy5pc1Jvb3QoKSk7XG4gICAgfVxuXG4gICAgZ2V0U3VwZXJ0eXBlKCk6IERhdGVUaW1lQXR0cmlidXRlVHlwZUltcGwge1xuICAgICAgICB0aHJvdyBcIk5vdCBpbXBsZW1lbnRlZCB5ZXRcIjtcbiAgICB9XG5cbiAgICBnZXRTdXBlcnR5cGVzKCk6IFN0cmVhbTxhbnk+IHtcbiAgICAgICAgdGhyb3cgXCJOb3QgaW1wbGVtZW50ZWQgeWV0XCI7XG4gICAgfVxuXG4gICAgZ2V0U3VidHlwZXMoKTogU3RyZWFtPGFueT4ge1xuICAgICAgICB0aHJvdyBcIk5vdCBpbXBsZW1lbnRlZCB5ZXRcIjtcbiAgICB9XG5cbiAgICBnZXRJbnN0YW5jZXMoKTogU3RyZWFtPGFueT4ge1xuICAgICAgICB0aHJvdyBcIk5vdCBpbXBsZW1lbnRlZCB5ZXRcIjtcbiAgICB9XG5cbiAgICBzZXRTdXBlcnR5cGUodHlwZTogRGF0ZVRpbWVBdHRyaWJ1dGVUeXBlKTogdm9pZCB7XG4gICAgICAgIHN1cGVyLnNldFN1cGVydHlwZSh0eXBlKTtcbiAgICB9XG5cbiAgICBwdXQodmFsdWU6IERhdGUpOiBEYXRlVGltZUF0dHJpYnV0ZUltcGwge1xuICAgICAgICByZXR1cm4gdGhpcy5wdXRJbnRlcm5hbCh2YWx1ZSkgYXMgRGF0ZVRpbWVBdHRyaWJ1dGVJbXBsO1xuICAgIH1cblxuICAgIGdldCh2YWx1ZTogRGF0ZSk6IERhdGVUaW1lQXR0cmlidXRlSW1wbCB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEludGVybmFsKHZhbHVlKSBhcyBEYXRlVGltZUF0dHJpYnV0ZUltcGw7XG4gICAgfVxufVxuIl19
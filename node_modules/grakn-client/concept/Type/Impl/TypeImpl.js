/*
 * Licensed to the Apache Software Foundation (ASF) under one
 * or more contributor license agreements.  See the NOTICE file
 * distributed with this work for additional information
 * regarding copyright ownership.  The ASF licenses this file
 * to you under the Apache License, Version 2.0 (the
 * "License"); you may not use this file except in compliance
 * with the License.  You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
 * KIND, either express or implied.  See the License for the
 * specific language governing permissions and limitations
 * under the License.
 */
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
(function (factory) {
    if (typeof module === "object" && typeof module.exports === "object") {
        var v = factory(require, exports);
        if (v !== undefined) module.exports = v;
    }
    else if (typeof define === "function" && define.amd) {
        define("grakn-client/concept/Type/Impl/TypeImpl", ["require", "exports", "graknlabs-grpc-protocol/protobuf/concept_pb", "graknlabs-grpc-protocol/protobuf/transaction_pb", "grakn-client/concept/Type/Impl/ThingTypeImpl", "grakn-client/concept/Proto/ConceptProtoReader"], factory);
    }
})(function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.RemoteTypeImpl = exports.TypeImpl = void 0;
    const concept_pb_1 = __importDefault(require("graknlabs-grpc-protocol/protobuf/concept_pb"));
    const transaction_pb_1 = __importDefault(require("graknlabs-grpc-protocol/protobuf/transaction_pb"));
    const ThingTypeImpl_1 = require("grakn-client/concept/Type/Impl/ThingTypeImpl");
    const ConceptProtoReader_1 = require("grakn-client/concept/Proto/ConceptProtoReader");
    class TypeImpl {
        constructor(label, root) {
            if (!label)
                throw "Type Label missing.";
            this._label = label;
            this._root = root;
        }
        static of(typeProto) {
            switch (typeProto.getEncoding()) {
                case concept_pb_1.default.Type.ENCODING.ROLE_TYPE:
                    throw "no"; // TODO: resolve circular reference
                // return RoleTypeImpl.of(typeProto);
                default:
                    return ThingTypeImpl_1.ThingTypeImpl.of(typeProto);
            }
        }
        getLabel() {
            return this._label;
        }
        isRoot() {
            return this._root;
        }
        isRemote() {
            return false;
        }
        toString() {
            return `${TypeImpl.name}[label:${this._label}]`;
        }
    }
    exports.TypeImpl = TypeImpl;
    class RemoteTypeImpl {
        constructor(transaction, label, isRoot) {
            if (!transaction)
                throw "Transaction Missing";
            if (!label)
                throw "IID Missing";
            this._rpcTransaction = transaction;
            this._label = label;
            this._isRoot = isRoot;
        }
        getLabel() {
            return this._label;
        }
        isRoot() {
            return this._isRoot;
        }
        isRemote() {
            return true;
        }
        setLabel(label) {
            this._label = label;
            throw "Not implemented yet"; // TODO: issue RPC call
        }
        isAbstract() {
            throw "Not implemented yet";
        }
        delete() {
            throw "Not implemented yet";
        }
        isDeleted() {
            return false;
        }
        get transaction() {
            return this._rpcTransaction;
        }
        toString() {
            return `${RemoteTypeImpl.name}[label:${this._label}]`;
        }
        thingStream(method, thingGetter) {
            const request = new transaction_pb_1.default.Transaction.Req()
                .setTypeReq(method.setLabel(this._label));
            return this._rpcTransaction.stream(request, res => thingGetter(res.getTypeRes()).map(ConceptProtoReader_1.ConceptProtoReader.thing));
        }
        execute(method) {
            const request = new transaction_pb_1.default.Transaction.Req()
                .setTypeReq(method.setLabel(this._label));
            return this._rpcTransaction.execute(request, res => res.getTypeRes());
        }
    }
    exports.RemoteTypeImpl = RemoteTypeImpl;
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVHlwZUltcGwuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9jb25jZXB0L1R5cGUvSW1wbC9UeXBlSW1wbC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7R0FpQkc7Ozs7Ozs7Ozs7Ozs7Ozs7SUFJSCw2RkFBdUU7SUFDdkUscUdBQStFO0lBQy9FLGdGQUFnRDtJQU1oRCxzRkFBb0U7SUFFcEUsTUFBc0IsUUFBUTtRQUkxQixZQUFzQixLQUFhLEVBQUUsSUFBYTtZQUM5QyxJQUFJLENBQUMsS0FBSztnQkFBRSxNQUFNLHFCQUFxQixDQUFDO1lBRXhDLElBQUksQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFDO1lBQ3BCLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDO1FBQ3RCLENBQUM7UUFFRCxNQUFNLENBQUMsRUFBRSxDQUFDLFNBQTRCO1lBQ2xDLFFBQVEsU0FBUyxDQUFDLFdBQVcsRUFBRSxFQUFFO2dCQUM3QixLQUFLLG9CQUFZLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxTQUFTO29CQUNyQyxNQUFNLElBQUksQ0FBQSxDQUFDLG1DQUFtQztnQkFDOUMscUNBQXFDO2dCQUN6QztvQkFDSSxPQUFPLDZCQUFhLENBQUMsRUFBRSxDQUFDLFNBQVMsQ0FBQyxDQUFDO2FBQzFDO1FBQ0wsQ0FBQztRQUVELFFBQVE7WUFDSixPQUFPLElBQUksQ0FBQyxNQUFNLENBQUM7UUFDdkIsQ0FBQztRQUVELE1BQU07WUFDRixPQUFPLElBQUksQ0FBQyxLQUFLLENBQUM7UUFDdEIsQ0FBQztRQUVELFFBQVE7WUFDSixPQUFPLEtBQUssQ0FBQztRQUNqQixDQUFDO1FBRUQsUUFBUTtZQUNKLE9BQU8sR0FBRyxRQUFRLENBQUMsSUFBSSxVQUFVLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQztRQUNwRCxDQUFDO0tBR0o7SUF0Q0QsNEJBc0NDO0lBRUQsTUFBc0IsY0FBYztRQUtoQyxZQUFzQixXQUF3QixFQUFFLEtBQWEsRUFBRSxNQUFlO1lBQzFFLElBQUksQ0FBQyxXQUFXO2dCQUFFLE1BQU0scUJBQXFCLENBQUM7WUFDOUMsSUFBSSxDQUFDLEtBQUs7Z0JBQUUsTUFBTSxhQUFhLENBQUM7WUFDaEMsSUFBSSxDQUFDLGVBQWUsR0FBRyxXQUE2QixDQUFDO1lBQ3JELElBQUksQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFDO1lBQ3BCLElBQUksQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDO1FBQzFCLENBQUM7UUFFRCxRQUFRO1lBQ0osT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDO1FBQ3ZCLENBQUM7UUFFRCxNQUFNO1lBQ0YsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDO1FBQ3hCLENBQUM7UUFFRCxRQUFRO1lBQ0osT0FBTyxJQUFJLENBQUM7UUFDaEIsQ0FBQztRQUVELFFBQVEsQ0FBQyxLQUFhO1lBQ2xCLElBQUksQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFDO1lBQ3BCLE1BQU0scUJBQXFCLENBQUMsQ0FBQyx1QkFBdUI7UUFDeEQsQ0FBQztRQUVELFVBQVU7WUFDTixNQUFNLHFCQUFxQixDQUFDO1FBQ2hDLENBQUM7UUFFRCxNQUFNO1lBQ0YsTUFBTSxxQkFBcUIsQ0FBQztRQUNoQyxDQUFDO1FBRUQsU0FBUztZQUNMLE9BQU8sS0FBSyxDQUFDO1FBQ2pCLENBQUM7UUFFRCxJQUFjLFdBQVc7WUFDckIsT0FBTyxJQUFJLENBQUMsZUFBZSxDQUFDO1FBQ2hDLENBQUM7UUFFRCxRQUFRO1lBQ0osT0FBTyxHQUFHLGNBQWMsQ0FBQyxJQUFJLFVBQVUsSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDO1FBQzFELENBQUM7UUFFUyxXQUFXLENBQUMsTUFBNkIsRUFBRSxXQUFpRTtZQUNsSCxNQUFNLE9BQU8sR0FBRyxJQUFJLHdCQUFnQixDQUFDLFdBQVcsQ0FBQyxHQUFHLEVBQUU7aUJBQ2pELFVBQVUsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO1lBQzlDLE9BQU8sSUFBSSxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQUMsT0FBTyxFQUFFLEdBQUcsQ0FBQyxFQUFFLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyx1Q0FBa0IsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO1FBQ3BILENBQUM7UUFFUyxPQUFPLENBQUMsTUFBNkI7WUFDM0MsTUFBTSxPQUFPLEdBQUcsSUFBSSx3QkFBZ0IsQ0FBQyxXQUFXLENBQUMsR0FBRyxFQUFFO2lCQUNqRCxVQUFVLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztZQUM5QyxPQUFPLElBQUksQ0FBQyxlQUFlLENBQUMsT0FBTyxDQUFDLE9BQU8sRUFBRSxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxDQUFDO1FBQzFFLENBQUM7S0FNSjtJQWxFRCx3Q0FrRUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogTGljZW5zZWQgdG8gdGhlIEFwYWNoZSBTb2Z0d2FyZSBGb3VuZGF0aW9uIChBU0YpIHVuZGVyIG9uZVxuICogb3IgbW9yZSBjb250cmlidXRvciBsaWNlbnNlIGFncmVlbWVudHMuICBTZWUgdGhlIE5PVElDRSBmaWxlXG4gKiBkaXN0cmlidXRlZCB3aXRoIHRoaXMgd29yayBmb3IgYWRkaXRpb25hbCBpbmZvcm1hdGlvblxuICogcmVnYXJkaW5nIGNvcHlyaWdodCBvd25lcnNoaXAuICBUaGUgQVNGIGxpY2Vuc2VzIHRoaXMgZmlsZVxuICogdG8geW91IHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZVxuICogXCJMaWNlbnNlXCIpOyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlXG4gKiB3aXRoIHRoZSBMaWNlbnNlLiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsXG4gKiBzb2Z0d2FyZSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhblxuICogXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTllcbiAqIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZVxuICogc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9uc1xuICogdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxuaW1wb3J0IHsgVHlwZSwgUmVtb3RlVHlwZSB9IGZyb20gXCIuLi9UeXBlXCI7XG5pbXBvcnQgeyBRdWVyeUl0ZXJhdG9yIH0gZnJvbSBcIi4uLy4uL0NvbmNlcHRcIjtcbmltcG9ydCBDb25jZXB0UHJvdG8gZnJvbSBcImdyYWtubGFicy1ncnBjLXByb3RvY29sL3Byb3RvYnVmL2NvbmNlcHRfcGJcIjtcbmltcG9ydCBUcmFuc2FjdGlvblByb3RvIGZyb20gXCJncmFrbmxhYnMtZ3JwYy1wcm90b2NvbC9wcm90b2J1Zi90cmFuc2FjdGlvbl9wYlwiO1xuaW1wb3J0IHsgVGhpbmdUeXBlSW1wbCB9IGZyb20gXCIuL1RoaW5nVHlwZUltcGxcIjtcbmltcG9ydCB7IEdyYWtuIH0gZnJvbSBcIi4uLy4uLy4uL0dyYWtuXCI7XG5pbXBvcnQgVHJhbnNhY3Rpb24gPSBHcmFrbi5UcmFuc2FjdGlvbjtcbmltcG9ydCB7IFJQQ1RyYW5zYWN0aW9uIH0gZnJvbSBcIi4uLy4uLy4uL3JwYy9SUENUcmFuc2FjdGlvblwiO1xuaW1wb3J0IHsgU3RyZWFtIH0gZnJvbSBcIi4uLy4uLy4uL3JwYy9TdHJlYW1cIjtcbmltcG9ydCB7IFRoaW5nSW1wbCB9IGZyb20gXCIuLi8uLi9UaGluZy9JbXBsL1RoaW5nSW1wbFwiO1xuaW1wb3J0IHsgQ29uY2VwdFByb3RvUmVhZGVyIH0gZnJvbSBcIi4uLy4uL1Byb3RvL0NvbmNlcHRQcm90b1JlYWRlclwiO1xuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgVHlwZUltcGwgaW1wbGVtZW50cyBUeXBlIHtcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9sYWJlbDogc3RyaW5nO1xuICAgIHByaXZhdGUgcmVhZG9ubHkgX3Jvb3Q6IGJvb2xlYW47XG5cbiAgICBwcm90ZWN0ZWQgY29uc3RydWN0b3IobGFiZWw6IHN0cmluZywgcm9vdDogYm9vbGVhbikge1xuICAgICAgICBpZiAoIWxhYmVsKSB0aHJvdyBcIlR5cGUgTGFiZWwgbWlzc2luZy5cIjtcblxuICAgICAgICB0aGlzLl9sYWJlbCA9IGxhYmVsO1xuICAgICAgICB0aGlzLl9yb290ID0gcm9vdDtcbiAgICB9XG5cbiAgICBzdGF0aWMgb2YodHlwZVByb3RvOiBDb25jZXB0UHJvdG8uVHlwZSk6IFR5cGVJbXBsIHtcbiAgICAgICAgc3dpdGNoICh0eXBlUHJvdG8uZ2V0RW5jb2RpbmcoKSkge1xuICAgICAgICAgICAgY2FzZSBDb25jZXB0UHJvdG8uVHlwZS5FTkNPRElORy5ST0xFX1RZUEU6XG4gICAgICAgICAgICAgICAgdGhyb3cgXCJub1wiIC8vIFRPRE86IHJlc29sdmUgY2lyY3VsYXIgcmVmZXJlbmNlXG4gICAgICAgICAgICAgICAgLy8gcmV0dXJuIFJvbGVUeXBlSW1wbC5vZih0eXBlUHJvdG8pO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gVGhpbmdUeXBlSW1wbC5vZih0eXBlUHJvdG8pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0TGFiZWwoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xhYmVsO1xuICAgIH1cblxuICAgIGlzUm9vdCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Jvb3Q7XG4gICAgfVxuXG4gICAgaXNSZW1vdGUoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICB0b1N0cmluZygpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gYCR7VHlwZUltcGwubmFtZX1bbGFiZWw6JHt0aGlzLl9sYWJlbH1dYDtcbiAgICB9XG5cbiAgICBhYnN0cmFjdCBhc1JlbW90ZSh0cmFuc2FjdGlvbjogVHJhbnNhY3Rpb24pOiBSZW1vdGVUeXBlO1xufVxuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgUmVtb3RlVHlwZUltcGwgaW1wbGVtZW50cyBSZW1vdGVUeXBlIHtcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9ycGNUcmFuc2FjdGlvbjogUlBDVHJhbnNhY3Rpb247XG4gICAgcHJpdmF0ZSBfbGFiZWw6IHN0cmluZztcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9pc1Jvb3Q6IGJvb2xlYW47XG5cbiAgICBwcm90ZWN0ZWQgY29uc3RydWN0b3IodHJhbnNhY3Rpb246IFRyYW5zYWN0aW9uLCBsYWJlbDogc3RyaW5nLCBpc1Jvb3Q6IGJvb2xlYW4pIHtcbiAgICAgICAgaWYgKCF0cmFuc2FjdGlvbikgdGhyb3cgXCJUcmFuc2FjdGlvbiBNaXNzaW5nXCI7XG4gICAgICAgIGlmICghbGFiZWwpIHRocm93IFwiSUlEIE1pc3NpbmdcIjtcbiAgICAgICAgdGhpcy5fcnBjVHJhbnNhY3Rpb24gPSB0cmFuc2FjdGlvbiBhcyBSUENUcmFuc2FjdGlvbjtcbiAgICAgICAgdGhpcy5fbGFiZWwgPSBsYWJlbDtcbiAgICAgICAgdGhpcy5faXNSb290ID0gaXNSb290O1xuICAgIH1cblxuICAgIGdldExhYmVsKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiB0aGlzLl9sYWJlbDtcbiAgICB9XG5cbiAgICBpc1Jvb3QoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pc1Jvb3Q7XG4gICAgfVxuXG4gICAgaXNSZW1vdGUoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHNldExhYmVsKGxhYmVsOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5fbGFiZWwgPSBsYWJlbDtcbiAgICAgICAgdGhyb3cgXCJOb3QgaW1wbGVtZW50ZWQgeWV0XCI7IC8vIFRPRE86IGlzc3VlIFJQQyBjYWxsXG4gICAgfVxuXG4gICAgaXNBYnN0cmFjdCgpOiBib29sZWFuIHtcbiAgICAgICAgdGhyb3cgXCJOb3QgaW1wbGVtZW50ZWQgeWV0XCI7XG4gICAgfVxuXG4gICAgZGVsZXRlKCk6IHZvaWQge1xuICAgICAgICB0aHJvdyBcIk5vdCBpbXBsZW1lbnRlZCB5ZXRcIjtcbiAgICB9XG5cbiAgICBpc0RlbGV0ZWQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgZ2V0IHRyYW5zYWN0aW9uKCk6IFRyYW5zYWN0aW9uIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JwY1RyYW5zYWN0aW9uO1xuICAgIH1cblxuICAgIHRvU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBgJHtSZW1vdGVUeXBlSW1wbC5uYW1lfVtsYWJlbDoke3RoaXMuX2xhYmVsfV1gO1xuICAgIH1cblxuICAgIHByb3RlY3RlZCB0aGluZ1N0cmVhbShtZXRob2Q6IENvbmNlcHRQcm90by5UeXBlLlJlcSwgdGhpbmdHZXR0ZXI6IChyZXM6IENvbmNlcHRQcm90by5UeXBlLlJlcykgPT4gQ29uY2VwdFByb3RvLlRoaW5nW10pOiBTdHJlYW08VGhpbmdJbXBsPiB7XG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgVHJhbnNhY3Rpb25Qcm90by5UcmFuc2FjdGlvbi5SZXEoKVxuICAgICAgICAgICAgLnNldFR5cGVSZXEobWV0aG9kLnNldExhYmVsKHRoaXMuX2xhYmVsKSk7XG4gICAgICAgIHJldHVybiB0aGlzLl9ycGNUcmFuc2FjdGlvbi5zdHJlYW0ocmVxdWVzdCwgcmVzID0+IHRoaW5nR2V0dGVyKHJlcy5nZXRUeXBlUmVzKCkpLm1hcChDb25jZXB0UHJvdG9SZWFkZXIudGhpbmcpKTtcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgZXhlY3V0ZShtZXRob2Q6IENvbmNlcHRQcm90by5UeXBlLlJlcSk6IFByb21pc2U8Q29uY2VwdFByb3RvLlR5cGUuUmVzPiB7XG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSBuZXcgVHJhbnNhY3Rpb25Qcm90by5UcmFuc2FjdGlvbi5SZXEoKVxuICAgICAgICAgICAgLnNldFR5cGVSZXEobWV0aG9kLnNldExhYmVsKHRoaXMuX2xhYmVsKSk7XG4gICAgICAgIHJldHVybiB0aGlzLl9ycGNUcmFuc2FjdGlvbi5leGVjdXRlKHJlcXVlc3QsIHJlcyA9PiByZXMuZ2V0VHlwZVJlcygpKTtcbiAgICB9XG5cbiAgICBhYnN0cmFjdCBhc1JlbW90ZSh0cmFuc2FjdGlvbjogVHJhbnNhY3Rpb24pOiBSZW1vdGVUeXBlSW1wbDtcbiAgICBhYnN0cmFjdCBnZXRTdXBlcnR5cGUoKTogVHlwZUltcGw7XG4gICAgYWJzdHJhY3QgZ2V0U3VidHlwZXMoKTogUXVlcnlJdGVyYXRvcjtcbiAgICBhYnN0cmFjdCBnZXRTdXBlcnR5cGVzKCk6IFF1ZXJ5SXRlcmF0b3I7XG59XG4iXX0=